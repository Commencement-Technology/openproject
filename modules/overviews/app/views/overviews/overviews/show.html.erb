<% content_for :header_tags do %>
  <meta name="sidebar_enabled" data-enabled="<%= @sidebar_enabled %>">
<% end -%>

<% favored = @project.favored_by?(User.current) %>
<%=
  primer_form_with(
    url: favorite_path(object_id: @project.id, object_type: @project.model_name.route_key),
    method: favored ? :delete : :post
  ) do |_form|
  render(Primer::OpenProject::PageHeader.new) do |header|
    header.with_title(variant: :medium) { t("overviews.label") }
    header.with_breadcrumbs(
      [
        { href: project_path(@project), text: @project.name },
        t("overviews.label")
      ]
    )
    if OpenProject::FeatureDecisions.favorite_projects_active?
      header.with_action_icon_button(
        icon: favored ? "star-fill" : "star",
        mobile_icon: favored ? "star-fill" : "star",
        size: :medium,
        type: :submit,
        classes: "op-primer--star-icon",
        label: favored ? I18n.t(:button_unfavorite) : I18n.t(:button_favorite),
        aria: { label: favored ? I18n.t(:button_unfavorite) : I18n.t(:button_favorite) },
        test_selector: 'project-favorite-button'
      )
      end
    end
  end
%>

<openproject-base></openproject-base>
